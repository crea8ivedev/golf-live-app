<style>
  .vt-swiper {
    position: relative;
  }

  .vt-slide {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
  }

  .vt-video-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .vt-slide img,
  .vt-slide video {
    width: 100%;
    height: 100%;
    display: block;
    object-fit: cover;
  }

  .vt-poster {
    position: absolute;
    inset: 0;
    cursor: pointer;
  }

  .vt-poster img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .vt-play-btn {
    position: absolute;
    inset: 0;
    margin: auto;
    border: none;
    cursor: pointer;
  }
</style>

<section class="vt-wrapper pt-[43px] min-990:pt-[94px] pb-[72px] min-990:pb-[98px]">
  <div class="min-990:px-[42px]">
    <div class="max-990:px-[28px]">
      {% if section.settings.heading != blank %}
        <h2 class="vt-heading text-center max-w-[300px] min-768:max-w-[700px] min-990:max-w-[700px] min-1440:max-w-[800px] min-1582:max-w-[1069px] mx-auto mb-[31px] min-990:mb-[54px]">
          {{ section.settings.heading | replace: '[highlight]', '<span>' | replace: '[/highlight]', '</span>' }}
        </h2>
      {% endif %}
    </div>

    <div class="relative max-990:pl-[28px]">
      <div class="swiper vt-swiper">
        <div class="swiper-wrapper">
          {% for block in section.blocks %}
            <div class="swiper-slide vt-slide" {{ block.shopify_attributes }}>
              {% if block.settings.video != blank %}
                <div class="vt-video-wrapper">
                  {{
                    block.settings.video
                    | video_tag:
                      controls: true,
                      autoplay: false,
                      muted: false,
                      loop: false,
                      preload: 'metadata',
                      class: 'vt-video'
                  }}

                  {% if block.settings.image != blank %}
                    <div class="vt-poster" data-video-poster>
                      <img
                        src="{{ block.settings.image | image_url: width: 800 }}"
                        alt="{{ block.settings.name | escape }}"
                        loading="lazy"
                        width="auto"
                        height="auto"
                      >
                      <button
                        class="vt-play-btn flex justify-center items-center"
                        type="button"
                        aria-label="Play video"
                      >
                        <svg xmlns="http://www.w3.org/2000/svg" width="54" height="67" viewBox="0 0 54 67" fill="none">
                          <path d="M48.3556 22.2282L21.9884 2.69733C19.9289 1.17397 17.4921 0.256425 14.9481 0.0464009C12.404 -0.163623 9.85206 0.342078 7.5751 1.50745C5.29813 2.67282 3.3851 4.45234 2.04803 6.64876C0.710967 8.84519 0.00210415 11.3727 1.66803e-05 13.9512V53.0325C-0.00395442 55.6135 0.701202 58.1449 2.03699 60.3451C3.37278 62.5453 5.2868 64.3279 7.566 65.4944C9.84519 66.6609 12.4001 67.1656 14.9464 66.9523C17.4927 66.739 19.9305 65.8161 21.9884 64.2863L48.3556 44.7555C50.1052 43.4585 51.5278 41.7636 52.5084 39.808C53.489 37.8524 54 35.691 54 33.4988C54 31.3066 53.489 29.1453 52.5084 27.1897C51.5278 25.234 50.1052 23.5392 48.3556 22.2422V22.2282Z" fill="white"/>
                        </svg>
                      </button>
                    </div>
                  {% endif %}
                </div>
              {% elsif block.settings.image != blank %}
                <img
                  src="{{ block.settings.image | image_url: width: 800 }}"
                  alt="{{ block.settings.name | escape }}"
                  loading="lazy"
                  width="auto"
                  height="auto"
                >
              {% endif %}

              {% if block.settings.name != blank %}
                <div class="vt-caption">
                  harmonious
                  <h4>{{ block.settings.name }}</h4>
                  <p>{{ block.settings.subtitle }}</p>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      </div>
      {% if section.settings.show_arrows %}
        <div class="swiper-button-prev vt-arrow vt-prev">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill="none">
            <g filter="url(#filter0_d_328_3049)">
              <circle cx="28" cy="28" r="28" transform="matrix(-1 0 0 1 60 0)" fill="white"/>
            </g>
            <path d="M37 17L25 29L37 41" stroke="black" stroke-width="2"/>
            <defs>
              <filter id="filter0_d_328_3049" x="0" y="0" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_328_3049"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_328_3049" result="shape"/>
              </filter>
            </defs>
          </svg>
        </div>
        <div class="swiper-button-next vt-arrow vt-next">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 64 64" fill="none">
            <g filter="url(#filter0_d_328_3046)">
              <circle cx="32" cy="28" r="28" fill="white"/>
            </g>
            <path d="M27 17L39 29L27 41" stroke="black" stroke-width="2"/>
            <defs>
              <filter id="filter0_d_328_3046" x="0" y="0" width="64" height="64" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="4"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_328_3046"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_328_3046" result="shape"/>
              </filter>
            </defs>
          </svg>
        </div>
      {% endif %}
    </div>

    <div class="max-990:px-[28px]">
      <div class="vt-buttons flex flex-wrap justify-center items-center gap-x-[66px] gap-y-[16px] max-990:mx-[28px] mt-[40px] min-990:mt-[65px]">
        {% if section.settings.golfer_text != blank %}
          <a
            href="{{ section.settings.golfer_url }}"
            class="golf-app-hero__button ctm-button button-green button-svg justify-end gap-[75px] min-990:gap-[42px] pr-[57px] min-990:pr-[56px] min-w-[337px] min-990:min-w-[346px] max-990:mx-auto"
          >
            {{ section.settings.golfer_text }}
            <svg xmlns="http://www.w3.org/2000/svg" width="37" height="20" viewBox="0 0 37 20" fill="none">
              <path d="M0 9.88391H35M35 9.88391L26 0.883911M35 9.88391L26 18.8839" stroke="currentcolor" stroke-width="2.5"/>
            </svg>
          </a>
        {% endif %}
        {% if section.settings.coach_text != blank %}
          <a
            href="{{ section.settings.coach_url }}"
            class="golf-app-hero__button ctm-button button-green button-svg justify-end gap-[75px] min-990:gap-[42px] pr-[57px] min-990:pr-[56px] min-w-[337px] min-990:min-w-[346px] max-990:mx-auto"
          >
            {{ section.settings.coach_text }}
            <svg xmlns="http://www.w3.org/2000/svg" width="37" height="20" viewBox="0 0 37 20" fill="none">
              <path d="M0 9.88391H35M35 9.88391L26 0.883911M35 9.88391L26 18.8839" stroke="currentcolor" stroke-width="2.5"/>
            </svg>
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<script>
  var swiper = new Swiper('.vt-swiper', {
    slidesPerView: 4,
    spaceBetween: 24,
    loop: true,
    navigation: {
      nextEl: '.vt-arrow.vt-next',
      prevEl: '.vt-arrow.vt-prev',
    },
    breakpoints: {
      0: { slidesPerView: 1.4 },
      640: { slidesPerView: 2.4 },
      990: { slidesPerView: 3 },
      1280: { slidesPerView: 4 },
    },
    on: {
      slideChange: function () {
        document.querySelectorAll('.vt-video').forEach(function (video) {
          video.pause();
        });
        document.querySelectorAll('[data-video-poster]').forEach(function (poster) {
          poster.style.display = '';
        });
      },
    },
  });

  document.addEventListener('click', function (e) {
    var poster = e.target.closest('[data-video-poster]');
    if (!poster) return;

    var wrapper = poster.closest('.vt-video-wrapper');
    var video = wrapper.querySelector('video');

    poster.style.display = 'none';
    video.play();
  });
</script>

{% schema %}
{
  "name": "Video Testimonials Swiper",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Thousands of Coaches and Golfers Are Already Seeing Results â€“ [highlight]Join Them Today[/highlight]"
    },
    {
      "type": "color",
      "id": "highlight_color",
      "label": "Highlight color",
      "default": "#0a7a28"
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show arrows",
      "default": true
    },
    {
      "type": "text",
      "id": "golfer_text",
      "label": "Golfer button text",
      "default": "I'M A GOLFER"
    },
    {
      "type": "url",
      "id": "golfer_url",
      "label": "Golfer button link"
    },
    {
      "type": "text",
      "id": "coach_text",
      "label": "Coach button text",
      "default": "I'M A COACH"
    },
    {
      "type": "url",
      "id": "coach_url",
      "label": "Coach button link"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button background",
      "default": "#0a7a28"
    },
    {
      "type": "color",
      "id": "button_text",
      "label": "Button text color",
      "default": "#ffffff"
    }
  ],
  "blocks": [
    {
      "type": "slide",
      "name": "Testimonial Slide",
      "settings": [
        {
          "type": "video",
          "id": "video",
          "label": "Video"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Poster image"
        },
        {
          "type": "text",
          "id": "name",
          "label": "Name"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Subtitle"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video Testimonials Swiper",
      "blocks": [{ "type": "slide" }, { "type": "slide" }, { "type": "slide" }, { "type": "slide" }]
    }
  ]
}
{% endschema %}
