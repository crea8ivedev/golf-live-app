{% style %}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
  }
  @media screen and (max-width: 1024px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top_tablet }}px;
      padding-bottom: {{ section.settings.padding_bottom_tablet }}px;
    }
  }
  @media screen and (max-width: 767px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top_mobile }}px;
      padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
    }
  }
{% endstyle %}

<div class="ctm_business_growth_challenges color-{{ section.settings.color_scheme }} {{ section.settings.extra_class }} section-{{ section.id }}-padding">
  {% comment %}show_announcement{% endcomment %}
  {% if section.settings.show_announcement %}
    <div class="ctm-green-container w-full bg-green-700 relative">
      <div class="max-w-full mx-auto flex items-center justify-center gap-3 px-4 py-4">
        {% if section.settings.icon_image != blank %}
          <span class="flex-shrink-0">
            {{
              section.settings.icon_image
              | image_url: width: 72
              | image_tag: loading: 'lazy', alt: section.settings.icon_image.alt, class: 'w-[72px] h-[72px]'
            }}
          </span>
        {% endif %}
        {% if section.settings.text != blank %}
          <p class="text-white text-[18px] lg:text-[27px] font-semibold uppercase tracking-wider text-center">
            {{ section.settings.text }}
          </p>
        {% endif %}
      </div>
      {% if section.settings.show_pointer %}
        <span
          class="
            absolute left-1/2 -bottom-[26px] transform -translate-x-1/2 w-0 h-0
            border-l-[28px] border-l-transparent
            border-r-[28px] border-r-transparent
            border-t-[28px] border-t-green-700
          "
        >
        </span>
      {% endif %}
    </div>
  {% endif %}

  {% if section.settings.side_image != blank %}
    <div class="challenges-side-image w-full h-full block md:hidden">
      {{
        section.settings.side_image
        | image_url: width: 800
        | image_tag: class: 'challenges-image', loading: 'lazy', alt: section.settings.side_image.alt
      }}
    </div>
  {% endif %}

  <div class="page-width ctm_bgc_heading_main">
    {% if section.settings.bgc_heading != blank %}
      <div class="section-heading text-center">
        {{ section.settings.bgc_heading }}
      </div>
    {% endif %}

    <div class="ctm_challenges_wrapper flex max-990:flex-col-reverse items-center gap-[30px] lg:gap-[50px] max-768:pt-[25px] justify-center {% if section.settings.pga_image_position == 'left' %}flex-row-reverse gap-[50px]{% endif %}">
      <div class="ctm_challenges_list w-full h-full">
        {% for block in section.blocks %}
          <div
            class="ctm_challenges_inner_list flex gap-[18px] lg:gap-[25px] items-start justify-center max-768:rounded-0 rounded-[22px]"
            style="{% if block.settings.bg_color != blank %}background: {{ block.settings.bg_color }}; {% endif %}"
          >
            {% if block.settings['bgc-img-icon'] != blank %}
              <div class="bgc-img-icon">
                <img
                  class=""
                  src="{{ block.settings.bgc-img-icon | image_url: width: 20, height: 20 }}"
                  alt="{{ block.settings.bgc-img-icon.alt | escape }}"
                  width="auto"
                  height="auto"
                  loading="lazy"
                >
              </div>
            {% endif %}
            <div class="challenge-item" {{ block.shopify_attributes }}>
              {% if block.settings.title != blank %}
                <h4 class="challenge-title ctm-text-pga">
                  {{ block.settings.title }}
                </h4>
              {% endif %}
              {% if block.settings.description != blank %}
                <p class="challenge-description">
                  {{ block.settings.description }}
                </p>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>

      {% if section.settings.bgc_heading != blank %}
        <div class="section-heading-center text-center block md:hidden">
          {{ section.settings.bgc_heading }}
        </div>
      {% endif %}

      {% if section.settings.side_image != blank %}
        <div class="challenges-side-image w-full h-full !hidden md:!block">
          {{
            section.settings.side_image
            | image_url: width: 800
            | image_tag:
              class: 'challenges-image rounded-[22px] mx-auto',
              loading: 'lazy',
              alt: section.settings.side_image.alt
          }}
        </div>
      {% endif %}
    </div>
  </div>
</div>
{% schema %}
{
  "name": "Growth Challenges",
  "class": "growth-section-section",
  "settings": [
    {
      "type": "text",
      "id": "extra_class",
      "label": "Extra Class"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-4"
    },
    {
      "type": "richtext",
      "id": "bgc_heading",
      "label": "Section Heading"
    },
    {
      "type": "image_picker",
      "id": "side_image",
      "label": "Right Side Image"
    },
    {
      "type": "select",
      "label": "Image Position",
      "id": "pga_image_position",
      "default": "right",
      "options": [
        {
          "label": "Right",
          "value": "right"
        },
        {
          "label": "Left",
          "value": "left"
        }
      ]
    },
    {
      "type": "header",
      "content": "Announcement Bar"
    },
    {
      "type": "checkbox",
      "id": "show_announcement",
      "label": "Enable Announcement Bar",
      "default": true
    },
    {
      "type": "textarea",
      "id": "text",
      "label": "Announcement Text",
      "default": "Thereâ€™s a better way to run your coaching business."
    },
    {
      "type": "image_picker",
      "id": "icon_image",
      "label": "Icon Image (Optional)"
    },
    {
      "type": "checkbox",
      "id": "show_pointer",
      "label": "Show Bottom Pointer",
      "default": true
    },
    {
      "type": "header",
      "content": "Desktop Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 52
    },
    {
      "type": "header",
      "content": "Tablet Padding"
    },
    {
      "type": "range",
      "id": "padding_top_tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Top",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom_tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "Padding Bottom",
      "default": 50
    },
    {
      "type": "header",
      "content": "Mobile Padding"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 52
    }
  ],
  "blocks": [
    {
      "type": "challenge",
      "name": "Challenge Item",
      "settings": [
        {
          "type": "image_picker",
          "id": "bgc-img-icon",
          "label": "Image Icon"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Challenge Title",
          "default": "Stuck on the Lesson Tee"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Challenge Description",
          "default": "You can only coach as many students as you have hours in the day."
        },
        {
          "type": "color",
          "label": "Background colour",
          "id": "bg_color"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Growth Challenges"
    }
  ]
}
{% endschema %}
