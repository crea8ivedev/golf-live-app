{%- style -%}
  #section-{{ section.id }} {
    background-color: {{ section.settings.bg_color }};
    padding-top: {{ section.settings.padding_top_mobile }}px;
    padding-bottom: {{ section.settings.padding_bottom_mobile }}px;
  }

  @media screen and (min-width: 768px) {
    #section-{{ section.id }} {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }

  #section-{{ section.id }} .coaching-steps-title,
  #section-{{ section.id }} .coaching-step-heading,
  #section-{{ section.id }} .coaching-step-desc {
    color: {{ section.settings.text_color }};
  }
{%- endstyle -%}

<div id="section-{{ section.id }}" class="coaching-steps-wrapper {{ section.settings.extra-class }}">
  <div class="coaching-steps-container">
    {%- if section.settings.heading != blank -%}
      <h2 class="coaching-steps-title">{{ section.settings.heading }}</h2>
    {%- endif -%}

    <div class="coaching-steps-grid">
      {%- for block in section.blocks -%}
        <div class="coaching-step-card" {{ block.shopify_attributes }}>
          <div class="coaching-step-image-wrap">
            {%- if block.settings.image != blank -%}
              {{ block.settings.image | image_url: width: 600 | image_tag: loading: 'lazy' }}
            {%- else -%}
              {{ 'image' | placeholder_svg_tag: 'bg-gray-200 w-full h-full' }}
            {%- endif -%}
          </div>

          <div class="coaching-step-content">
            <span class="coaching-step-badge">{{ block.settings.step_label }}</span>
            <h3 class="coaching-step-heading">{{ block.settings.title }}</h3>
            <p class="coaching-step-desc">{{ block.settings.description }}</p>
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Coaching-Steps",
  "max_blocks": 4,
  "settings": [
    {
      "type": "text",
      "id": "extra-class",
      "label": "Extra Class"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Start Coaching Smarter in 4 Simple Steps"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#f3f4f6"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Desktop Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 80
    },
    {
      "type": "header",
      "content": "Mobile Spacing"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Step Image"
        },
        {
          "type": "text",
          "id": "step_label",
          "label": "Badge",
          "default": "Step 1"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Set Up Your Profile"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Add your bio, credentials, services, and rates."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Coaching-Steps",
      "blocks": [{ "type": "step" }, { "type": "step" }, { "type": "step" }, { "type": "step" }]
    }
  ]
}
{% endschema %}
