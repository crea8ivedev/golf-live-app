{% stylesheet %}
  .golf-features-section {
    padding: 80px 0;
    text-align: center;
  }

  .golf-features-heading {
    max-width: 800px;
    margin: 0 auto 48px;
  }

  .golf-feature-card {
    background: #fff;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
    text-align: left;
    height: 100%;
  }

  .golf-feature-image {
    background: radial-gradient(circle at center, #0d3b2e 0%, #000 100%);
    padding: 24px;
  }

  .golf-feature-image img {
    width: 100%;
    display: block;
    border-radius: 12px;
  }

  .golf-feature-content {
    padding: 24px;
  }

  .golf-feature-content h3 {
    margin-bottom: 12px;
  }

  .golf-pill {
    display: inline-block;
    background: #1e7f4d;
    color: #fff;
    border-radius: 999px;
    padding: 4px 12px;
    font-size: 12px;
    margin: 12px 0 6px;
  }

  /* Grid fallback */
  .golf-features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 32px;
  }

  @media (max-width: 749px) {
    .golf-features-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Slider wrapper */
  .golf-features-slider-wrapper {
    position: relative;
  }

  /* Arrows outside slider */
  .golf-features-arrows {
    position: absolute;
    top: 50%;
    left: -56px;
    right: -56px;
    display: flex;
    justify-content: space-between;
    transform: translateY(-50%);
    pointer-events: none;
    z-index: 5;
  }

  .golf-features-arrows button {
    pointer-events: all;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  @media (max-width: 749px) {
    .golf-features-arrows {
      left: -12px;
      right: -12px;
    }
  }
{% endstylesheet %}

<div class="golf-features-section page-width">
  <div class="golf-features-heading">
    {% if section.settings.heading != blank %}
      <h2>{{ section.settings.heading }}</h2>
    {% endif %}
    {% if section.settings.subheading != blank %}
      <p>{{ section.settings.subheading }}</p>
    {% endif %}
  </div>

  {% assign desktop_slider = section.settings.enable_slider_desktop %}
  {% assign mobile_slider = section.settings.enable_slider_mobile %}

  <div class="golf-features-slider-wrapper">
    {% comment %}
      {% if desktop_slider or mobile_slider %}
        <div class="golf-features-arrows">
          <button class="golf-features-prev swiper-button-prev" type="button">
            {% render 'slider-arrow-golf-pre' %}
          </button>
          <button class="golf-features-next swiper-button-next" type="button">
            {% render 'slider-arrow-golf-next' %}
          </button>
        </div>
      {% endif %}
    {% endcomment %}

    <div
      class="{% if desktop_slider or mobile_slider %}golf-features-swiper swiper{% endif %}"
      data-desktop-slider="{{ desktop_slider }}"
      data-mobile-slider="{{ mobile_slider }}"
    >
      <div class="{% if desktop_slider or mobile_slider %}swiper-wrapper{% else %}golf-features-grid{% endif %}">
        {% for block in section.blocks %}
          <div
            class="{% if desktop_slider or mobile_slider %}swiper-slide{% else %}golf-feature-card{% endif %}"
            {{ block.shopify_attributes }}
          >
            <div class="golf-feature-card">
              <div class="golf-feature-image">
                {% if block.settings.image != blank %}
                  <img
                    src="{{ block.settings.image | image_url: width: 600 }}"
                    alt="{{ block.settings.title | escape }}"
                    loading="lazy"
                    width="auto"
                    height="auto"
                  >
                {% endif %}
              </div>

              <div class="golf-feature-content">
                {% if block.settings.title != blank %}
                  <h3>{{ block.settings.title }}</h3>
                {% endif %}

                {% if block.settings.description != blank %}
                  {{ block.settings.description }}
                {% endif %}

                {% if block.settings.coach_description != blank %}
                  <span class="golf-pill">{{ block.settings.coach_text }}</span>
                  <p>{{ block.settings.coach_description }}</p>
                {% endif %}

                {% if block.settings.golfer_description != blank %}
                  <span class="golf-pill">{{ block.settings.golfer_text }}</span>
                  <p>{{ block.settings.golfer_description }}</p>
                {% endif %}
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% javascript %}
  (function () {
    const section = document.querySelector('.golf-features-section');
    if (!section) return;

    const swiperEl = section.querySelector('.golf-features-swiper');
    if (!swiperEl || typeof Swiper === 'undefined') return;

    const enableDesktop = swiperEl.dataset.desktopSlider === 'true';
    const enableMobile = swiperEl.dataset.mobileSlider === 'true';
    const isMobile = window.matchMedia('(max-width: 749px)').matches;

    if ((isMobile && enableMobile) || (!isMobile && enableDesktop)) {
      if (!swiperEl.classList.contains('swiper-initialized')) {
        new Swiper(swiperEl, {
          slidesPerView: isMobile ? 1.1 : 3,
          spaceBetween: 24,
          navigation: {
            nextEl: section.querySelector('.golf-features-next'),
            prevEl: section.querySelector('.golf-features-prev'),
          },
        });
      }
    }
  })();
{% endjavascript %}

{% schema %}
{
  "name": "Golf Features",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "checkbox",
      "id": "enable_slider_desktop",
      "label": "Enable slider on desktop",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_slider_mobile",
      "label": "Enable slider on mobile",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "coach_text",
          "label": "Coach pill text",
          "default": "Coach"
        },
        {
          "type": "textarea",
          "id": "coach_description",
          "label": "Coach description"
        },
        {
          "type": "text",
          "id": "golfer_text",
          "label": "Golfer pill text",
          "default": "Golfer"
        },
        {
          "type": "textarea",
          "id": "golfer_description",
          "label": "Golfer description"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Golf Features"
    }
  ]
}
{% endschema %}
